@model MoneyVision.Domain.Entities.Transaction.Responses.TransactionsListResp

@{
     ViewBag.Title = "Index";
     Layout = "~/Views/Shared/_SidebarLayout.cshtml";
}

<div class="container mt-5 mb-5">
     <h1><span>Transactions</span><a href="@ViewBag.CreateUrl">Create</a></h1>
     <div class="transactions-list">
          <div>Id</div>
          <div>Amount</div>
          <div>Category</div>
          <div>Date</div>
          <div></div>
          <div></div>
          @foreach (var item in Model.Transactions)
          {
               <div data-id="@item.Id">@item.Id</div>
               <div data-id="@item.Id">@item.Amount</div>
               <div data-id="@item.Id">@item.Category</div>
               <div data-id="@item.Id">@item.CreatedAt</div>
               <div data-id="@item.Id"><a href="/workspaces/@item.WorkspaceId/Transactions/Update/@item.Id">Edit</a></div>
               <div data-id="@item.Id"><button class="delete-button" data-id="@item.Id">Delete</button></div>
          }

          <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
          <script>
               $(document).ready(function () {
                    $('.delete-button').click(function () {
                         var itemId = $(this).data('id');

                       if (confirm('Are you sure you want to delete this item?')) {
                          $.ajax({
                              url: "/Workspaces/@ViewBag.WorkspaceId/Transactions/Delete/" + itemId,
                               type: 'POST',
                               success: function (result) {
                                    if (result.success) {
                                        $('div[data-id="' + itemId + '"]').remove();
                                     } else {
                                     alert('Error deleting item.');
                                   }
                                },
                                error: function (xhr, status, error) {
                                  alert('Error: ' + error);
                               }
                          });
                     }
        });
    });
          </script>
          <script>
               console.log("@Url.Action("Delete", "Transactions", new { workspaceId = 1 })")
          </script>

     </div>
</div>
